# tg-bot

tg-bot — это Telegram-бот, который мониторит набор веб-страниц и сообщает в чат, когда какая-либо из них начинает отдавать `200 OK`. Подходит для отслеживания публикации страниц событий, афиш, регистраций и других URL, которые нужно "поймать" сразу после появления.

## Как работает

- Бот читает список адресов из `links.txt` (один URL на строку).
- В цикле отправляет HTTP-запросы к каждому URL.
- Если ответ страницы `200 OK`, бот отправляет уведомление в Telegram.
- `links.txt` перечитывается в рантайме, поэтому изменения применяются автоматически без перезапуска.
- Пустые строки и строки, начинающиеся с `#`, игнорируются.

## Конфигурация

Переменные окружения:

- `TELEGRAM_TOKEN` — токен Telegram-бота
- `CHAT_ID` — ID чата для уведомлений
- `CHECK_INTERVAL_SECONDS` — интервал проверки (по умолчанию `30`)

Шаблоны:

- `.env.example` — пример `.env`
- `links.example` — пример файла ссылок

## Сборка

```bash
go build -o tg-bot main.go
```

## Запуск локально (без Docker)

1. Создайте `.env` на основе `.env.example`.
2. Создайте `links.txt` на основе `links.example`.
3. Экспортируйте переменные из `.env` и запустите бинарник.

Пример:

```bash
set -a
source .env
set +a
./tg-bot
```

## Запуск через Docker Compose

1. Создайте `.env` и `links.txt` в корне проекта.
2. Запустите:

```bash
docker compose up -d --build
```

## Формат `links.txt`

```text
# комментарий
https://example.com/page-1
https://example.com/page-2
```
